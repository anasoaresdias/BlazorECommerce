@page "/manager/addproduct"
@inject IProductService productservice
@inject ICategoryService categoryservice

<h3>Add Product</h3>

<EditForm Model = "product" OnSubmit="HandleSubmit">
     <div>
        <label for="title">Title</label>
        <InputText id="title" @bind-Value="product.Title" class="form-control"></InputText>
    </div>
    <div>
        <label for="description">Description</label>
        <InputText id="description" @bind-Value="product.Description" class="form-control"></InputText>
    </div>
    <div>
        <label for="image">Image</label>
        <InputText id="image" @bind-Value="product.ImageUrl" class="form-control"></InputText>
    </div>
    <div>
        <label>Comic</label><br />
        <InputSelect @bind-Value="product.CategoryId" class="form-select">
            @foreach (var categories in categoryservice.Categories)
           {
               <option value="@categories.Id">@categories.Name</option>
           }
        </InputSelect>
    </div>
    <br />
    <button type="submit" class ="button-24">Add</button>
</EditForm>

@code {
    private Product product = new Product();
    protected override async Task OnInitializedAsync()
    {
        await categoryservice.GetCategories();
    }

    async Task HandleSubmit()
    {
        await productservice.AddProduct(product);
    }
}
