@page "/profile"
@inject IAuthenticationServices authentication
@attribute [Authorize]

<AuthorizeView>
    <h3>Hii <i>@context.User.Identity.Name</i></h3>
</AuthorizeView>

<h5>Change Pawword</h5>

<EditForm Model="user" OnValidSubmit="ChangePassword">
    <DataAnnotationsValidator/>
    <div>
        <label for="password">New Password</label>
        <InputText id = "password" @bind-Value="user.Password" type = "password" class="form-control"/>
        <ValidationMessage For="@(()=>user.Password)"/>
    </div>
    <div>
        <label for="confirmpassword">Confirm New Password</label>
        <InputText id = "confirmpassword" @bind-Value="user.ConfirmPassword" type = "password" class="form-control"/>
        <ValidationMessage For="@(()=>user.ConfirmPassword)"/>
    </div>
    <br />
    <button type="submit" class = "button-24">Apply</button>
    <div>
        <span>@Message</span>
    </div>
    <ValidationSummary/>
</EditForm>

@code {
    ChangePassword user = new ChangePassword();

    string Message = string.Empty;

    private async Task ChangePassword()
    {
        var result = await authentication.ChangePassword(user);
        Message = result.Message;
    }
}
